---
title: "Workflow to use agGraphSearch"
shorttitle: "Short tutorial: leukemia"
author:
  - name: Satoshi Kume
date: "`r Sys.Date()`"
graphics: no
package: agGraphSearch, knitr, SPARQL, EBImage
output:
  BiocStyle::html_document:
  toc_float: true
vignette: >
  %\VignetteIndexEntry{Short tutorial: leukemia}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
  %\VignetteDepends{agGraphSearch}
---

```{r style, echo = FALSE, results = 'asis', message=FALSE}
BiocStyle::markdown()
```

**Last modified:** `r file.info("agGraphSearch-WF-001.Rmd")$mtime`<br />
**Compiled**: `r date()`

# Introduction

The agGraphSearch package is a tool-set to support the construction of domain ontologies.
This package provides a methodology for extracting target domain concepts from a large-scale public Linked Open Data (LOD) system. 
In the proposed method, the class-related hierarchy of the domain concept by the occurrences of common upper entities and the chain of those path relationships is obtained. 
The proposed method was described in Figure 1.

```{r Fig01, fig.cap = "Overview of the upper-level concept graph and analysis algorithm. The numbers in the nodes indicate the number of search entities that exist in the subordinate concepts.", echo = FALSE}
library(EBImage)
img <- system.file("images", "Fig_01.png", package="agGraphSearch")
EBImage::display(EBImage::readImage(files = img))
```


As an example of class hierarchy extraction from LOD, 
this short tutorial provides a workflow to obtain and visualize 
conceptual hierarchies related to leukemia from wikidata endpoint 
using its some entity labels.

This result is similar to [the network graph obtained with wikidata graph builder](https://angryloki.github.io/wikidata-graph-builder/?property=P279&item=Q29496&iterations=2&mode=reverse).

# Getting started

Once `r Rpackage("agGraphSearch")` is installed, it can be loaded by the following command.

```{r library, message=FALSE}
library("agGraphSearch")
```

# Vocabularies related to leukemia.

In this tutorial, 4 terms related to leukemia are used as follows.

- acute lymphocytic leukemia (wd:Q180664)
- Chronic eosinophilic leukemia (wd:Q5113976)
- Congenital leukemia (wd:Q56325830)
- philadelphia-positive myelogenous leukemia (wd:Q55790812)

The proper number of search terms is under researching.
If the locally extraction of domain hierarchy is performed,
Search terms should be used more than 2 or 3 terms at least.

```{r echo=TRUE, eval=FALSE}
terms <- c("acute lymphocytic leukemia",
           "Chronic eosinophilic leukemia",
           "Congenital leukemia",
           "philadelphia-positive myelogenous leukemia")
```

# Check the data

```{r echo=TRUE, eval=FALSE}
head(words)
dim(words)

head(wordsj)
dim(wordsj)
```

# Delete blanks

```{r echo=TRUE, eval=FALSE}
words.c <- unique(as.character(unlist(words)[unlist(words) != ""]))
wordsj.c <- unique(as.character(unlist(wordsj)[unlist(wordsj) != ""]))
```

# combind the search seeds and delete the deplicates

```{r echo=TRUE, eval=FALSE}
words.cc <- unique(c(wordsj.c, words.c))

agTableFM(data.frame(words.cc))
```

# Extract Japanese vocabulary

```{r echo=TRUE, eval=FALSE}
words.lab <- words.cc[1:515]

agTableFM(as.data.frame(words.lab))
```

# save file

```{r echo=TRUE, eval=FALSE}
#create a new folder
if(!dir.exists("00_Input")){dir.create("00_Input")}

#save to csv
readr::write_excel_csv(data.frame(words.lab), file="./00_Input/words.lab.csv", col_names = F)
```

# Session information {.unnumbered}
```{r sessionInfo, echo=FALSE}
sessionInfo()
```
